<#--å°çº¢ä¹¦:ç¬”è®° ä¸æ˜¾ç¤ºSPU-->
<#--noteä¼ é€’å‚æ•°ï¼šnote:{}ã€solution:{}ã€solutionSections:[]ã€solutionItems:{xxx:[]}ã€noteItems:{xxx: []}-->
<#--å…¶ä¸­ï¼šsolutionItemsé”®å€¼ä¸ºsectionIdï¼Œvalueä¸ºå¯¹åº”sectionä¸‹çš„æ¡ç›®åˆ—è¡¨ï¼›noteItemsé”®å€¼ä¸ºSolutionItemIdï¼Œvalueä¸ºå¯¹åº”SolutionItemIdä¸‹çš„æ¡ç›®åˆ—è¡¨-->

<#--è¡¨æƒ…ç¬¦å·æ˜ å°„ï¼ŒåŒ…æ‹¬ç±»å‹ã€sectionç« èŠ‚ç­‰-->
<#assign itemTypeMap={"scene":"ğŸï¸","hotel":"ğŸ¨","flight":"âœˆï¸","ticket":"ğŸ«","guide":"ğŸ™‹","visa":"ğŸŒ","restaurant":"ğŸ½ï¸","car":"ğŸš—","service":"ğŸ›ï¸","food":"ğŸ—","leisure":"â™¨ï¸","show":"ğŸ’ƒğŸ»","tour":"ğŸ–¼ï¸","vehicle":"ğŸšŒ","train":"ğŸš„","cruiser":"ğŸ›³ï¸"}/>
<#assign sectionMap={"1","1ï¸âƒ£","2":"2ï¸âƒ£","3":"3ï¸âƒ£","4":"4ï¸âƒ£","5":"5ï¸âƒ£","6":"6ï¸âƒ£","7":"7ï¸âƒ£","8":"8ï¸âƒ£","9":"9ï¸âƒ£","10":"ğŸ”Ÿ"}/>
<#--è‡ªåŠ¨æ›¿æ¢æ–‡å­—åŒ…å«é¢œæ–‡å­—-->
<#assign emojiMap={"è‰åŸ":"ğŸ€","å¼€è½¦":"ğŸš—","è·‘æ­¥":"ğŸƒğŸ»","å­©å­":"ğŸƒâ€â™‚ï¸","å°å­©":"ğŸ§šâ€â™€ï¸ğŸƒâ€â™‚ï¸","æ˜Ÿæ˜Ÿ":"â­ï¸","æµæ˜Ÿ":"ğŸŒ ","ä¸‹é›ª":"ğŸŒ¨","ç¯ç«":"ğŸ”¥","å½©è™¹":"ğŸŒˆ","å¸ç¯·":"â›ºï¸","æ•™å ‚":"â›ªï¸","æ²™æ»©":"ğŸ–","éœ²è¥":"â›ºï¸","é—¨ç¥¨":"ğŸ«","ç„°ç«":"","åœ£è¯":"ğŸ„","çƒŸèŠ±":"ğŸ†","å†°å·":"ğŸ§Š","æ—¥è½":"ğŸŒ‡","æ—¥å‡º":"ğŸŒ…","ç†ŠçŒ«":"ğŸ¼","é›ªäºº":"â›„ï¸","å†°é›ª":"â„ï¸","é›ªèŠ±":"â„ï¸","äº‘æµ·":"â˜ï¸","é£æ™¯":"ğŸï¸","æ«å¶":"ğŸ","è½å¶":"ğŸ‚","ï¼Ÿ":"â“","?":"â“","ä»·æ ¼":"ğŸ’°","åŒ…æ‹¬":"âœ…","åŒ…å«":"âœ…","ä¸åŒ…æ‹¬":"âŒ","ä¸åŒ…å«":"âŒ","ä¼˜æƒ ":"ğŸ‰"}/>

<#--LOGO-->
<div style="width:100%;"><img src="${solution.logo!''}" style="object-fit:cover;width:100%;"/></div>

<#--æ ‡é¢˜:æ›¿æ¢é¢œæ–‡å­—-->
<#assign name = note.name!''/>
<#list emojiMap?keys as key>
	<#assign name = name?replace(key, key+emojiMap[key])/>
</#list>
<h2 class="sxH2">${name}</h2>

<#--æè¿°-->
<#if note.description??>
<#assign description = note.description!''/>
<#list emojiMap?keys as key>
	<#assign description = description?replace(key, key+emojiMap[key])/>
</#list>
<div style="width:100%;">â€¼ï¸${description}</div>
</#if>

<#--è¡Œç¨‹æ‘˜è¦ï¼šextJsonå±æ€§-->
<#--åŸºç¡€ä¿¡æ¯ï¼šé€æ¡æ˜¾ç¤º extJsonã€‚éœ€è¦é¢„å…ˆå‡†å¤‡é”®å€¼å¯¹ã€‚ä½œä¸ºæ ‡ç­¾å±•ç¤º-->
<#if solution.extJson?? >
	<br/>
	<div>âœ…è¡Œç¨‹æ‘˜è¦</div>
    <#list solution.extJson?keys as key>
	<#if solution.extJson[key]?? >
	    <div>ğŸ‘‰${key}ï¼š${solution.extJson[key]!}</div>
    	</#if>	
    </#list>
	<#--ä»·æ ¼-->
	<#if solution.price?? && solution.price?is_number> 
		<div>ğŸ’°ä»·æ ¼ï¼š${solution.price}</div>
	</#if>    
</#if>	

<#--è¡Œç¨‹å®‰æ’ï¼šæŒ‰sectionå±•ç¤ºï¼Œä¸€ä¸ªsectionå±•ç¤ºä¸€æ¡ã€‚ä»…å±•ç¤º sceneåˆ—è¡¨-->
<#--sectionç»“æ„ä¸ºæ•°ç»„-->
<br/>
<div>âœ…è¡Œç¨‹å®‰æ’</div>
<#list solutionSections as section>

	<#assign sectionIndex = '' +(section_index+1) />
	<#assign sectionText = '' />
	<#--Itemsåˆ—è¡¨ï¼šä»solutionItemsä¸­è·å–ï¼Œå…¶ç»“æ„ä¸º{sectionId: []}-->
	<#assign items = solutionItems[section.id]>

	<#--åŒ…å«æœ‰spuåŠå…³è”çš„item.spuåˆ—è¡¨-->
	<#--æ˜¾ç¤ºSPUåŠitem.spuè¯¦æƒ…-->
	<#list items as item>

		<#--ä»…æ˜¾ç¤ºæ™¯ç‚¹åˆ—è¡¨ï¼šæ³¨æ„spuæ•°æ®ä¸­typeå­˜åœ¨stringåŠå¯¹è±¡ä¸¤ç§æƒ…å†µ-->
		<#assign itemType = item.spu.type!''>
		<#if itemType?is_string >
			<#if itemType == 'scene' >
				<#assign sectionText = sectionText + '--' + item.name />
			</#if>
		<#elseif itemType.item == 'scene' >
			<#assign sectionText = sectionText + '--' + item.name />
		</#if>
		
	</#list>
	<#if sectionText?? && (sectionText?length>2)>
		<div>ğŸ‘‰D${sectionIndex} ï¼š${sectionText?substring(2)}</div>
	<#else>
		<div>ğŸ‘‰D${sectionIndex} ï¼šè‡ªç”±æ´»åŠ¨</div>
	</#if>
</#list>

<#--è¡Œç¨‹äº®ç‚¹ï¼šæ ¹æ®solutionItemäº®ç‚¹åˆ—ä¸¾-->
<br/>
<div>ğŸ’–è¡Œç¨‹äº®ç‚¹</div>
<#list solutionSections as section>
	<#--Itemsåˆ—è¡¨ï¼šä»solutionItemsä¸­è·å–ï¼Œå…¶ç»“æ„ä¸º{sectionId: []}-->
	<#assign items = solutionItems[section.id]>

	<#--åŒ…å«æœ‰spuåŠå…³è”çš„item.spuåˆ—è¡¨-->
	<#--æ˜¾ç¤ºSPUåŠitem.spuè¯¦æƒ…-->
	<#list items as item>
		<#--ä»…æ˜¾ç¤ºæ™¯ç‚¹åˆ—è¡¨ï¼šæ³¨æ„spuæ•°æ®ä¸­typeå­˜åœ¨stringåŠå¯¹è±¡ä¸¤ç§æƒ…å†µ-->
		<#if item.description?? && item.description != "">
			<#assign description = item.description!''/>
			<#list emojiMap?keys as key>
				<#assign description = description?replace(key, key+emojiMap[key])/>
			</#list>
			<div>?${description}</div>
		</#if>
	</#list>
</#list>

<#--ç¬”è®°å†…å®¹ï¼šæŒ‰sectionå±•ç¤ºï¼Œä¸€ä¸ªsectionç‹¬ç«‹å±•ç¤º-->
<#--sectionç»“æ„ä¸ºæ•°ç»„-->
<#list solutionSections as section>
	<#assign sectionIndex = '' +(section_index+1) />
	<br/>
	<div>ç¬¬${sectionMap[sectionIndex]!sectionIndex}å¤©</div>
	<#--Itemsåˆ—è¡¨ï¼šä»solutionItemsä¸­è·å–ï¼Œå…¶ç»“æ„ä¸º{sectionId: []}-->
	<#assign items = solutionItems[section.id]>

    <#--æ˜¾ç¤ºsectionä¸‹çš„ noteItemè¯¦æƒ…-->
    <#--NoteItemsåˆ—è¡¨ï¼šä»solutionItemsä¸­è·å–ï¼Œå…¶ç»“æ„ä¸º{solutionItemId: []} æ³¨æ„ï¼šå½“å‰noteItemæœªå…³è”åˆ°solutionItemï¼Œè€Œæ˜¯ç›´æ¥æ”¾åœ¨sectionä¸‹-->
    <#assign nItems = noteItems[section.id]>
    <#list nItems as nItem>
        <#--ç›´æ¥æ˜¾ç¤ºå†…å®¹-->
		<#assign content = nItem.content!''/>
		<#list emojiMap?keys as key>
			<#assign content = content?replace(key, key+emojiMap[key])/>
		</#list>        
        <div>${content}</div> 
    </#list>

</#list>


<#--æ ‡ç­¾åˆ—è¡¨-->
<#if note.tags??>
<br/>
<div class="sxTags">
	<#list note.tags?split(" ") as tag>
		<#if tag?? && tag != "">
		<span class="sxTag">#${tag} </span>
		</#if>
	</#list>
</div>
</#if>